# 2.1 Hello, Go

## O que torna Go diferente de outras linguagens?

A linguagem de programação Go foi criada com um objetivo em mente: ser capaz de construir aplicativos da Web escaláveis ​​para públicos em grande escala em uma grande equipe. Então essa é a razão pela qual eles tornaram a linguagem o mais padronizada possível, daí a ferramenta `gofmt` e as diretrizes rígidas de uso da linguagem, evitando diferentes versões na base de desenvolvedores. Por exemplo, em outras linguagens há guerras "religiosas" em onde manter a chave de abertura?
```java

    public static void main() {

    }

    ou

    public static void main()
    {

    }
```
Em python devemos usar 4 espaços ou 6 espaços? Um Tab ou dois Tabs? Entre outras preferências do usuário. 
Se você conhece python, deve conhecer o PEP8, que é um conjunto de diretrizes sobre como escrever um código elegante.

Embora isso possa parecer um problema superficial, quando a base de código cresce e mais e mais pessoas trabalham na mesma base de código, fica cada vez mais difícil manter a "beleza" do código. Vivemos em um mundo onde os robôs podem dirigir um carro, então não devemos apenas escrever código, devemos escrever código elegante.

Para outras linguagens, existem muitas variáveis ​​quando se trata de escrever código. Toda linguagem é boa para seu caso de uso, mas Go é um pouco especial porque foi projetado em uma empresa que é o próprio sinônimo de Internet (e computação distribuída). Normalmente, para otimizar programas, os desenvolvedores optam por escrever Java ao invés Python ou C++ ao invés de Java, mas quase todas as linguagens disponíveis foram escritas décadas atrás, quando o armazenamento de 1 GB era muito mais caro. 
Agora, o armazenamento e a computação são relativamente baratos e os computadores estão recebendo vários núcleos, mas as "linguagens antigas" não estão aproveitando a concorrência da maneira que fazem. Não é porque essas linguagens são ruins; utilizar a concorrência não era um caso de uso relevante enquanto as linguagens mais antigas evoluiam.

Para mitigar todos os problemas que o Google enfrentou com as ferramentas atuais, eles criaram uma linguagem de sistemas chamada Go, que você está prestes a aprender! Há muitas vantagens em usar golang e também há desvantagens, pois cada moeda tem os dois lados. Uma das melhorias significativas está na formatação do código. O Google projetou a linguagem para evitar debates sobre formatação de código. O código Go escrito por qualquer pessoa no mundo (assumindo que eles conheçam e usem `gofmt`) terão a mesma aparência. Isso não parece importar até que você trabalhe em equipe! Além disso, quando a empresa usa revisão de código automatizada ou alguma outra técnica sofisticada, o código formatado pode quebrar em outras linguagens que não possuem regras de formatação rígidas e padrão, mas não em go!

Go foi projetado com concorrência em mente, observe que paralelismo != concorrência, há um [post incrível](https://blog.golang.org/concurrency-is-not-parallelism) sobre o assunto de Rob Pike no [golang blog ](https://blog.golang.org/). Vale a pena ler.

Outra mudança muito importante que é o conceito de `GOPATH`. Há muito tempo atrás você tinha que criar uma pasta chamada `code` e depois criar espaços de trabalho (workspaces) no Eclipse e outras IDEs. Agora você tem que manter uma árvore de pastas para o código go que será atualizado pelo gerenciador de pacotes automaticamente. Também é recomendável criar pastas com um domínio personalizado ou o domínio GitHub, por exemplo, ao criar um gerenciador de tarefas usando golang, o código estará no conjunto de pastas
`~/go/src/github.com/thewhitetulip/Tasks`

**Nota:** Em sistemas *nix, `~` significa diretório inicial (home do usuário), que é o equivalente Windows de `C:\\Users\\username`.
O `~/go/` é o universo para o gocode em sua máquina. Esta é uma melhoria significativa em relação a outras linguagens; podemos armazenar o código de forma eficiente sem aborrecimentos. Embora possa parecer estranho no começo, essa abordagem faz muito sentido do que os nomes de pacotes ridículos, ou seja, nomes de pacotes gerados para outras linguagens usando domínios diferentes.

**Nota:** Junto com `src` existem duas pastas: `pkg` que é para pacotes e `bin` que é para binário.

Essa vantagem do `GOPATH` não se restringe apenas ao armazenamento de código em uma pasta específica. Quando você cria cinco pacotes para seu projeto, não precisa importá-los como `"import ./db"`. Em vez disso, você pode usar `import "github.com/thewhitetulip/Tasks/db"` para que, ao executar `go get` no meu repositório, a ferramenta `go` encontre o pacote do caminho `github.com/...` se não foi baixado inicialmente. Isso padroniza muitas coisas erradas na disciplina de programação. (<-- Para remover e substituir com uma explicação realista de por que isso é melhor)

Embora possa haver algumas reclamações fundamentadas de que os criadores ignoraram todas as pesquisas linguísticas feitas nos últimos 30 anos, você não pode criar um produto ou uma linguagem pela qual todos se apaixonem. Há sempre uns ou outros casos de uso ou restrições que os criadores devem considerar. Considerando todas as vantagens pelo menos para o desenvolvimento web, acho que nenhuma linguagem chega perto das vantagens que o `go` tem mesmo se você ignorar tudo o que eu disse acima. Go é compilada, o que significa que em produção, você não terá que configurar um `JVM` ou um `virtualenv` e terá um único binário estático! Como uma cereja no topo do bolo, todas as bibliotecas modernas estão na biblioteca padrão, como a `http` lib, permitindo que você crie aplicativos da web em golang sem usar uma estrutura da web de terceiros.

Antes de iniciar a construção de aplicações completas em Go, nós precisamos aprender a escrever um programa simples, afinal, você não pode construir um prédio sem antes construir sua fundação. Sendo assim, vamos aprender a sintaxe básica para executar alguns programas simples nessa seção.

## Programa

Seguindo a reconhecida prática internacional, antes de aprender como programar em qualquer linguagem, você precisa saber como escrever um programa que imprime a famosa frase "Hello world".

Pronto pra esse primeiro desafio? Vamos lá!

```Go
	package main

	import "fmt"

	func main() {
		fmt.Printf("Hello, world or 你好，世界 or Καλημέρα κόσμε or こんにちは世界\n")
	}
```

Isto irá imprimir a seguinte informação.

	Hello, world or 你好，世界 or καλημ ́ρα κóσμ or こんにちは世界

## Explicação

Uma coisa que você precisa entender em primeiro lugar é que os programas Go são compostos de pacotes (identificados pela palavra-chave `package`).

`package <pkgName>` define o nome do pacote, no nosso exemplo temos `package main` que identifica que esse código pertence ao pacote `main` e a palavra `main` indica que esse pacote será compilado em um programa ao invés de um pacote com extensão `.a`.

Todo programa executável possui um, e somente um, pacote `main` e este último precisa conter uma função nomeada como `main` sem nenhum argumento ou valores de retorno.

Para exibir a mensagem `Hello, world…`, foi utilizada uma função chamada `Printf`. Esta função faz parte do pacote `fmt`, então nós importamos esse pacote na terceira linha do código usando a instrução `import "fmt"`.

A maneira de pensar nos pacotes em Go é similar a linguagem Python, e traz a seguintes vantagens: Modularidade (quebrar seu programa em vários módulos) e Reusabilidade (todos os módulos podem ser usados em diferentes lugares). Estes são os principais tópicos que precisamos falar sobre pacotes, e nós vamos fazer os nossos próprios pacotes mais tarde.

Na quinta linha, nós usamos a palavra `func` para definir a função `main` e o corpo da função está dentro de chaves(`{}`), da mesma forma que é feito em C, C++ e Java.

Como você pode notar, não temos argumentos. Nós iremos ver como escrever funções com argumentos em breve, assim como funções que possuem zero, um ou vários valores de retorno também.

Na sexta linha, chamamos a função `Printf` que vem do pacote `fmt`. Este tipo de função é invocada pela sintaxe `<pkgName>.<funcName>`, que é muito parecido com o estilo Python.

Como mencionado no Capítulo 1, o nome do pacote e o nome da pasta que o contém podem ser diferentes. O nome do pacote vem do `<pkgName>` em `package <pkgName>`, não do nome da pasta.

Você pode notar que o exemplo acima contém vários caracteres não-ASCII (que não estão na tabela ASCII). O objetivo é demonstrar que a linguagem Go tem suporte nativo a UTF-8. Você pode usar qualquer caracter UTF-8 em seus programas.

Cada arquivo go está em algum pacote, e esse pacote deve ser uma pasta distinta no seu GOPATH, mas main é um pacote especial que não requer uma pasta `main`. Este é um aspecto que eles deixaram de lado para a padronização! Mas se você optar por criar um diretório principal, deverá garantir que execute o binário corretamente. Além disso, um código go não pode ter mais de um arquivo go `main`.

`~/go/src/github.com/thewhitetulip/Tasks/main $ go build`
`~/go/src/github.com/thewhitetulip/Tasks $ ./main/main`

O que acontece é que quando seu código está usando alguns arquivos estáticos ou qualquer outra coisa, então você deve executar o binário da raiz do aplicativo como vemos na segunda linha acima, estou executando o binário `main` *fora* do pacote principal, às vezes você pode se perguntar por que seu aplicativo não está funcionando, então esse pode ser um dos possíveis problemas, lembre-se disso.

Uma coisa que você notará aqui é que go não força o uso do ponto e vírgula (;) para terminar uma instrução. Na verdade, o ; é obrigatório, mas se o programador não inserir esse caracter, o compilador adicionará ponto e vírgula para o gocode quando ele compila. Por essa razão (felizmente!) esse código apresenta um erro de sintaxe

```Go
    func main ()
    {
    }
```
Isso ocorre porque o compilador adiciona um ponto e vírgula no final de `main()` que é um erro de sintaxe e como dito acima, ajuda a evitar guerras religiosas. Eu gostaria que eles combinassem `vim` e `emacs` e criassem um editor universal capaz de resolver mais algumas guerras! Mas por enquanto vamos aprender Go.

## Conclusão

Go usa pacotes (semelhantes aos módulos em Python) para organizar os programas. A função `main.main()` (função que precisa estar no pacote `main`) é o ponto de entrada para todos os programas. Go suporta UTF-8 de forma nativa, pois um dos criadores da linguagem é também o criador do UTF-8, logo Go possui suporte para vários idiomas (mult-lang) por padrão.

## Links

- [Sumário](preface.md)
- Seção anterior: [Conhecimento básico de Go](02.0.md)
- Próxima seção: [Fundamentos Go](02.2.md)
